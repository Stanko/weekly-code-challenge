parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"w1ka":[function(require,module,exports) {
"use strict";function t(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.random,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16;const n=void 0!==t;let r=0,a=1;n&&void 0!==e?(r=t,a=e):n&&(r=0,a=t);const i=(o||Math.random)()*(a-r)+r;return d?parseFloat(i.toFixed(d)):Math.round(i)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=t;
},{}],"TDub":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("../../utils/random"));function e(t){return t&&t.__esModule?t:{default:t}}function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const s=10,h=1e3/60,n=-.15,a=.15,r=.015,o=.4,d=1,g=12,l=.2,c=.6,u=60,b=40,p=100,w=["../\\..",">BIRD>","......"],m=["......",">BIRD>","..\\/.."],y=["  yy  ","yyyyyr","  yy  "],v=["--------------------","|     GAME OVER    |","|                  |","|  TO RESTART TAP  |",'|   OR PRESS "R"   |',"--------------------"],f=["bbbbbbbbbbbbbbbbbbbb","b     xxxx xxxx    b","b                  b","b  gg ggggggg ggg  b","b   gg ggggg ggg   b","bbbbbbbbbbbbbbbbbbbb"],L=["--------------------","|     YOU WON!     |","|                  |","|  THANK YOU FOR   |","|     PLAYING      |","--------------------"],E=["gggggggggggggggggggg","g     www wwww     g","g                  g","g  ggggg ggg ggg   g","g     ggggggg      g","gggggggggggggggggggg"],C=p,D=2*b,O=["...CLOUD....","CLOUD.CLOUD.",".CLOUD.CLOUD"],x=[".CLOUD.CLOUD.......","CLOUD..............",".......CLOUD.CLOUD"],S=[".......CLOUD.....","CLOUD.CLOUD.CLOUD",".......CLOUD.....",".........CLOUD..."],U="high-score",M="function"==typeof performance?performance.now:Date.now;class T{constructor(t){let{width:e=30,height:s=20}=t;i(this,"handleKeyDown",t=>{"space"===t.code.toLowerCase()&&(this.keys.space=!0)}),i(this,"handleKeyUp",t=>{this.canJump=!0,this.keys={},"keyr"===t.code.toLowerCase()&&this.restart()}),i(this,"handleTouchStart",t=>{this.running?(t.preventDefault(),t.stopPropagation()):this.restart(),this.keys.space=!0}),i(this,"handleTouchMove",t=>{this.running&&(t.preventDefault(),t.stopPropagation())}),i(this,"handleTouchEnd",t=>{this.canJump=!0,this.keys={}}),this.width=e,this.height=s,this.maxHeight=this.height-1,this.fieldElement=document.querySelector(".field"),this.bindEvents(),this.restart()}restart(){this.running=!0,this.keys={},this.canJump=!0,this.distance=0,this.birdSpeed=o,this.bird={y:10,velocity:n},this.walls=this.generateWalls(),this.clouds=this.generateClouds(),this.render(),this.lastUpdate=M(),this.animate()}stop(){this.running=!1;const t=this.getScore();t>(parseInt(localStorage.getItem(U),10)||0)&&localStorage.setItem(U,t)}bindEvents(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp),window.addEventListener("touchmove",this.handleTouchMove),window.addEventListener("touchstart",this.handleTouchStart),window.addEventListener("touchend",this.handleTouchEnd),window.addEventListener("mousedown",this.handleTouchStart),window.addEventListener("mouseup",this.handleTouchEnd)}destroy(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("mousedown",this.handleTouchStart),window.removeEventListener("mouseup",this.handleTouchEnd)}render(){this.field=this.createEmptyField(),this.drawClouds(),this.drawWalls(),this.drawBird(),this.drawStats();const t=['<span class="g">G</span>','<span class="g">R</span>','<span class="g">O</span>','<span class="g">U</span>','<span class="g">N</span>','<span class="g">D</span>'," "],e=[];for(let i=0;i<this.width;i++)e.push(t[(i+Math.round(this.distance))%t.length]);if(this.field.unshift(e),!this.running){const t=Math.round(this.height/2-3),e=Math.round(this.width/2-10);this.getScore()<p?this.draw(v,t,e,f):this.draw(L,t,e,E)}this.fieldElement.innerHTML=this.field.reverse().map(t=>t.join("")).join("<br />")}createEmptyField(){const t=[];for(let e=0;e<this.height;e++){t[e]||(t[e]=[]);for(let i=0;i<this.width;i++)t[e][i]=" "}return t}generateWalls(){const e=[],i=Math.round(c*this.height),s=Math.round(l*this.height);for(let h=0;h<p;h++)e.push({height:(0,t.default)(s,i,null,0),x:u+h*b,top:Math.random()>.5});return e}generateClouds(){const e=[],i=[O,x,S];for(let s=0;s<C;s++){const h=i[(0,t.default)(0,2,null,0)];e.push({image:h,x:Math.round(s*(D*(0,t.default)(.5,1.5))),bottom:Math.round(.5*this.height+(0,t.default)(0,.3*this.height))})}return e}drawBird(){const t=Math.round(this.bird.y)-1,e=s-5,i=this.bird.velocity>0?[...m]:[...w];this.running||(this.getScore()<p?i[1]=i[1].replace("BIRD","NOES"):i[1]=i[1].replace("BIRD","EASY")),this.draw(i,t,e,y)}drawClouds(){for(let t=0;t<this.clouds.length;t++){const e=this.clouds[t],i=Math.round(e.x-.5*this.distance);i<-20||i>this.width||this.draw(e.image,e.bottom,i)}}drawWalls(){let t=Math.round((this.distance-u)/b);t<0&&(t=0);let e=Math.ceil(t+this.width/b);e>this.walls.length-1&&(e=this.walls.length-1);for(let i=t;i<=e;i++){const t=this.walls[i];t.x<this.distance+this.width&&this.drawWall(t)}}drawWall(t){const e=[],i=[],s=Math.round(t.x-this.distance);for(let n=0;n<t.height;n++)e.push("WALL"),i.push("dddd");let h=0;t.top&&(h=this.height-t.height),this.draw(e,h,s,i)}draw(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const h=[...t].reverse(),n=s?[...s].reverse():null;h.forEach((t,s)=>{t.split("").forEach((t,h)=>{const a=this.field[e+s];if(a&&a[i+h]&&"."!==t){let e=t;n&&" "!==n[s][h]&&(e='<span class="'.concat(n[s][h],'">').concat(t,"</span>")),a[i+h]=e}})})}drawStats(){const t=parseInt(localStorage.getItem(U),10)||0,e=["score: ".concat(this.getScore())," best: ".concat(t)];this.draw(e,this.height-2,this.width-10,["bbbbbb xxx"," bbbbb xxx"])}checkForCrash(){this.bird.y<0&&this.stop();for(let t=0;t<this.walls.length;t++){const e=this.walls[t],i=Math.round(e.x-this.distance);if(s>=i-1&&s<=i+2)if(e.top){if(this.bird.y>=this.height-e.height)return void this.stop()}else if(this.bird.y<=e.height)return void this.stop()}}checkJump(){this.keys.space&&this.canJump?(this.jumpCount++,this.bird.velocity=(1+.1*this.jumpCount)*a,this.jumpCount>g&&(this.jumpCount=0,this.canJump=!1)):this.jumpCount=0}update(t){this.distance+=t*this.birdSpeed,this.bird.y+=t*this.bird.velocity,this.bird.y>this.maxHeight&&(this.bird.y=this.maxHeight),this.bird.velocity>n&&(this.bird.velocity-=r),this.bird.velocity<n&&(this.bird.velocity=n),this.birdSpeed<d&&(this.birdSpeed=o+this.distance/1e3)}animate(){if(!this.running)return;const t=M(),e=(t-this.lastUpdate)/h;this.checkJump(t),this.update(e),this.checkForCrash(),this.render(),this.lastUpdate=t,this.running&&requestAnimationFrame(()=>this.animate())}getScore(){let t=Math.ceil((this.distance-u)/b);return t<0&&(t=0),t}}exports.default=T;
},{"../../utils/random":"w1ka"}],"fFAy":[function(require,module,exports) {
"use strict";var e=t(require("./game"));function t(e){return e&&e.__esModule?e:{default:e}}const r=Boolean(navigator.userAgent.match(/Android|iPhone|iPad|iPod/i));function n(){const t=document.querySelector(".single-char"),n=getComputedStyle(document.documentElement),o=parseInt(n.getPropertyValue("--safe-area-bottom"),10),i=parseInt(n.getPropertyValue("--safe-area-left"),10),a=parseInt(n.getPropertyValue("--safe-area-right"),10),l=parseInt(n.getPropertyValue("--safe-area-top"),10),d=window.innerWidth/window.innerHeight,u=r?d>1?200:100:150,s=r?150:50,c=window.innerWidth-u-i-a,g=window.innerHeight-s-l-o;let h=Math.floor(c/t.clientWidth),m=Math.floor(g/t.clientHeight);return console.log(h,m),h>100&&(h=100),m>30&&(m=30),new e.default({width:h,height:m})}let o=n(),i=null;window.addEventListener("resize",()=>{clearTimeout(i),i=setTimeout(()=>{if(o){o.destroy(),document.querySelector(".field").remove();const e=document.createElement("pre");e.setAttribute("class","field"),document.querySelector(".wrapper").prepend(e)}o=n()},200)});
},{"./game":"TDub"}]},{},["fFAy"], null)
//# sourceMappingURL=/weekly-code-challenge/js.0e2c7c44.js.map